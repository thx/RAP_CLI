# Delos

```
node delos project 5151
```

```
#TODO
delos view
delos model
```

## 最早的想法

目前作为数据服务，在开发阶段提供模拟数据。前端在开发阶段，会去频繁的查看 RAP 上的字段配置，如果将 RAP 的字段配置导出到本地开发环境，概念上类似于后台语言的纯数据对象。新人在接触项目时，也可以作为文档使用。

基于 RAP 的字段配置，可以通过工具生成通用的增删改查页面（HTML 和 JS），其中包含了常见的页面功能，可以大大减少搭建页面所需时间。

Magix View 在职责上负责业务展现，但是现在的业务实现中，View 代码中还是会耦合很多数据请求和处理代码，有时回掉栈会很长很深，阅读和调试起来不方便，时间久了，想改也不敢改。RAP 结合 Magix 的 ModelManager，通过工具可以在前端自动生成通用的数据层，解耦展现层和数据层，View 的职责、代码更清晰，同时减少前端与后端的联调和开发时间。

## 铺垫

RAP 组织的层级结构为 **团队 > 产品 > 分组 > 项目**，有些冗余，组织结构只保留 **团队 & 个人 > 项目**即可，像 GitHub 一样。

项目的层级结构为 **模块 > 页面 > 接口**，基本满足需求。缺点是不够灵活，不能随意分组。

## 倒果为因

### 基于现有结构生成

* 模块 => 文件夹
* 页面 => HTML，JS
* GET => 列表（HTML 片段，JS 请求）
    - 入参 => 输入域
    - 入参+备注 => 输入域类型 或 组件
    - 输出 => 表格列
    - 输出备注 => Mock 规则
* POST/PUT => 表单
    - 入参 => 输入域
    - 无入参 => 输出作为输入域
* DELETE => ?
    - 只有方法？

**优点：**
1. RAP 结构即项目结构

**缺点：**
1. 数据存在冗余。同一份数据模型可能会配置在多个地方，录入麻烦。
2. 不够通用。
3. 模块、页面随意命名，可能是中文。

### 基于数据模型生成

要生成增删改查页面，必须先有数据模型。数据模型可以从获取单条记录的接口中解析。
一个模块下可能有多个数据模型，基于数据模型的名称生成增删改查页面。
数据模型可以用一个特定名称 BO 标识出。

**优点：**
1. 通用性更好

**缺点：**
1. 额外的规则
